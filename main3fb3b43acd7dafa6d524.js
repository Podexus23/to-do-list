(()=>{"use strict";let t=function(t,e,n){let o=document.createElement(t);if(e&&o.classList.add(e),n){let{text:t,source:e,data:i,atr:r}=n;if(t&&(o.textContent=t),e&&(o.src=e),i&&(o.dataset[i[0]]=i[1]),r)for(let t in r)o.setAttribute(t,r[t])}return o},e=function(){const e=document.querySelector(".task-todos"),n=e.querySelector(".add-todo");e.addEventListener("click",(function(t){t.target.classList.contains("remove-todo")&&t.target.parentNode.remove()})),n.addEventListener("click",(function(){let o=function(){let e=t("div","todo-container");return e.innerHTML='\n      <input type="checkbox" name="task-todo" id="todo">\n      <textarea class="todo-title"></textarea>\n      <button type="button" class="remove-todo">x</button>',e}(),i=o.querySelector(".todo-title");i.addEventListener("input",(function(){i.style.height=i.scrollHeight+"px"})),e.insertBefore(o,n)}))};const n=function(t){if(t.target.classList.contains("min-delete"))return t.target.closest(".min-task_container").remove(),e=t.target.closest(".min-task_container").dataset.id,void delete o[e];var e;const n=document.querySelector(".max-task_container"),i=document.querySelector(".max-info"),r=t.target.closest(".min-task_container").dataset.id;n&&n.remove(),i.append(d(JSON.stringify(o[r])))};let o={},i=function(){function i(){const t=document.querySelector(".max-info"),n=document.querySelector(".max-task_container");let o=JSON.stringify({todos:{0:{checked:!1,text:""}}},null,2);n.remove(),t.append(d(o)),e()}return{onSubmitForm:function(e){let r=e.target.form.parentNode.dataset.id;var a;(function(t){const e=t.target.form,n=t.target.form.parentNode.dataset.id;o[n]=function(t){const e=t.querySelector("#task-date"),n=t.querySelector(".task-priority");return{title:t[0].value||"",description:t[1].value||"",todos:function(){const e=t.querySelectorAll(".todo-container");let n={};return e.forEach(((t,e)=>{const o=t.querySelector('input[type="checkbox"]'),i=t.querySelector("textarea");n[e]={checked:o.checked,text:i.value}})),n}(),priority:function(){const t=Array.from(n.querySelectorAll('input[type="radio"]'));if(console.log(),t.filter((t=>t.checked))[0])return t.filter((t=>t.checked))[0].value}()||"medium",date:e.value||"",id:t.parentNode.dataset.id}}(e)})(e),a=o[r],document.querySelector(".min-info").append(function(e){const o=t("div","min-task_container",{data:["id",e.id],atr:{"data-priority":e.priority}});return o.innerHTML=`\n  <h3 class="min-title title">${e.title}</h3>\n  <div class="min-description">\n    <div class="min-priority">${e.priority}</div>\n    <div class="min-date">${e.date}</div>\n    <button class="min-delete">remove</button>\n  </div>\n  `,o.addEventListener("click",n),o}(a)),i()},resetForm:i,onRemoveForm:function(t){document.querySelector(".max-task_container").remove(),removeFromMin(),removeFromBank(),console.log("remove!")}}}(),r=i.onSubmitForm,a=i.onRemoveForm,d=function(e){let n=JSON.parse(e),o=n.id||+Array.from(document.querySelectorAll("[data-id]")).map((t=>t.dataset.id)).sort(((t,e)=>e-t))[0]+1||1,i=t("div","max-task_container",{data:["id",o]});function d(e){let{checked:n,text:o}=e,i=t("div","todo-container");i.innerHTML=`\n      <input type="checkbox" name="task-todo" id="todo" ${n?"checked":""}>\n      <textarea class="todo-title">${o}</textarea>\n      <button type="button" class="remove-todo">x</button>`;let r=i.querySelector(".todo-title");return r.addEventListener("input",(function(){r.style.height=r.scrollHeight+"px"})),i}return i.append(function(){const e=t("form","form-container");return e.append(function(e){const n=t("div","task-title");return n.innerHTML=e?`<input type="text" name="title" id="task-title" value="${e}">`:'<input type="text" name="title" id="task-title" placeholder="Task name">',n}(n.title)),e.append(function(e){const n=t("div","task-description");return n.innerHTML=e?`<textarea name="description" id="task-description" placeholder="Description">${e}</textarea>`:'<textarea name="description" id="task-description" placeholder="Description"></textarea>',n}(n.description)),e.append(function(e){const n=t("div","task-todos");let o=t("button","add-todo",{text:"Add checklist",atr:{type:"button"}});if(e){for(let t in e)n.append(d(e[t]));n.append(o)}else n.append(o);return n}(n.todos)),e.append(function(e,n){const o=t("div","task-options");const i=t("fieldset","task-priority"),r=t("legend","task-priority-title",{text:"Priority"});i.append(r),["low","medium","high"].forEach((n=>{const o=t("div","radio-wrapper"),r=t("input",void 0,{atr:{type:"radio",name:"priority",id:`${n}-priority`,value:`${n}`}}),a=t("label",void 0,{atr:{for:`${n}-priority`},text:`${n}`});n==e&&r.setAttribute("checked","true"),o.append(r),o.append(a),i.append(o)})),o.append(i);const a=t("div","task-date");return a.innerHTML=`\n      <label for="task-date">Date</label>\n      <input type="date" name="date" id="task-date" ${n?`value="${n}"`:""}>\n    `,o.append(a),o}(n.priority,n.date)),e.append(function(){const e=t("div","task-add-remove");return e.innerHTML='\n    <button type="button" class="button-add">Submit</button>\n    <button type="button" class="button-delete">Remove</button>\n    ',e.addEventListener("click",(function(t){return t.target.classList.contains("button-add")?r(t):t.target.classList.contains("button-delete")?a(t):void 0})),e}()),e}()),i},c=JSON.stringify({title:"finish To-do task",description:"it's quite complicated but interesting",todos:{0:{checked:!0,text:"Actually, a lot of things"},1:{checked:!1,text:"As minimum adding check lists"}},priority:"high",date:"2022-02-21",id:4},null,2);JSON.stringify({todos:{0:{checked:!1,text:""}}},null,2),document.querySelector(".max-info").append(d(c)),e()})();